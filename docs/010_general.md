# Django Reference

## Table of content

-   [Project structure](#project-structure)
-   [Installation](#installation)
    -   [Pre-requisites](#pre-requisites)
    -   [Initial setup](#initial-setup)
-   [Database management](#database-management)
-   [Execution](#execution)
    -   [Examples](#examples)
-   [Development](Development)
-   [Testing](#testing)
    

## Project structure

-   **/routes**: Api routes extensions (Custom endpoints definitions)
-   **/domain**: Business logic methods
-   **/models**: Data model extensions. (Database model representation)
-   **/models/fixtures**: Initial data inserts (e.g. dummy data and catalogs)
-   /app/settings.py: Django settings
-   /seed: Autogenerated files produced by seed-builder: It includes model definitions, CRUD endpoint creation, serializers and graphql implementation
    >   *These files are *read-only*, modifiable only through [seed-builder](./060_seed_builder.md)*


## Installation

### Pre-requisites


-   Download & Install [Docker Engine](https://docs.docker.com/engine/install/)
-   Download & Install [Docker Compose](https://docs.docker.com/compose/install/)
    >   For linux adjust docker for non-root user usage [guide](https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user)
-   Download & install [VSCode](https://code.visualstudio.com/)

### Initial setup

-   Clone this repository
-   Set execute permissions to scripts (linux) `chmod +x bin/setup`
-   Execute setup script `bin/setup`
-   Optionally configure .env.dev fields with custom server attributes, database connections, secret, etc

## Database management

-   To update database (migration, fixtures) execute `./bin/update`
-   To open db manager (psql) execute `./bin/query`


## Execution

-   Start server `bin/start`
-   Open server shell `bin/shell`
    >   *Open in a new terminal with server running*


### Examples

-   API browser: [http://localhost:8008/api](http://localhost:8008/api)
-   Graphql browser: [http://localhost:8008/graphql](http://localhost:8008/graphql)
-   Admin pane: [http://localhost:8008/admin](http://localhost:8008/admin)
    >   *To access admin pane, create a user fixture with the *is_superuser* attribute set to true*

### Development

-   For enable a IDE intepreter for developing (e.g. lint, debug), create a python virtual environment and install requirements
    -   Linux
    ```shell
    sudo apt update
    sudo apt install python3.6
    python3 -m venv .venv
    . .venv/bin/activate
    pip3 install -r requirements.txt
    ```
    -   Windows
    ```shell
    # Install python from https://www.python.org/downloads/
    python -m venv .venv
    . .venv/Script/activate
    pip install -r requirements.txt
    ```

## Testing

-   Test use cases `bin/test`
-   Analyze code coverage `bin/coverage`