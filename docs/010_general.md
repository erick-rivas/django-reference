# Django Reference

## Table of content

-   [Project structure](#project-structure)
-   [Installation](#installation)
    -   [Pre-requisites](#pre-requisites)
    -   [Initial setup](#initial-setup)
-   [Database updates](#database-updates)
-   [Execution](#execution)
    -   [Examples](#examples)
-   [Testing](#testing)
    

## Project structure

-   **/routes**: Api routes extensions (Custom endpoints definitions).
-   **/domain**: Business logic methods.
-   **/models**: Data model extensions. (Database model representation)
-   **/models/fixtures**: Initial data inserts (Eg. dummy data and catalogs).
-   /app: General settings of the application.
    -   settings.py: Django settings (Eg. Installed modules, global vars, etc).
-   /tests: Test cases of the application.
-   /seed: Autogenerated files produced by seed-builder: It includes model definitions, CRUD endpoint creation, serializers and graphql implementation
    >   *These files are *read-only*, modifiable only through seed-builder*


## Installation

### Pre-requisites

-   Download & install [Python3](https://www.python.org/downloads/)
-   Download & install [PostgreSQL](https://www.postgresqltutorial.com/postgresql-getting-started/)
-   Download & install [PyCharm CE](https://www.jetbrains.com/pycharm/download/) (optional)
>   *To facilitate development it is recommended to run the project on a debian distribution (Eg. ubuntu)*

### Initial setup

-   Clone this repository.
-   Execute install script
```bash
./bin/setup.sh <DB_NAME> <DB_USER> <DB_PASSWORD>
```
>   *For windows, run the bin/setup.sh commands manually*

-   Optionally configure .env.dev fields with server attributes, database connections, secret keys, etc.

### Database updates

-   To update database (migration, fixtures) execute
```bash
./bin/update.sh
```
>   *For windows, run the bin/update.sh commands manually*


## Execution

-   Run server.
```bash
python3 manage.py runserver
```

### Examples

-   API browser: [http://localhost:8000/api](http://localhost:8000/api)
-   Graphql browser: [http://localhost:8000/graphql](http://localhost:8000/graphql)
-   Admin pane: [http://localhost:8000/admin](http://localhost:8000/admin)
>   *To access admin pane, create a user fixture with the *is_superuser* attribute set to true*

## Testing

-   Test use cases
```bash
python3 manage.py test
```

-   Analyze code coverage
```bash
coverage run --omit='.venv/*,bin/*,tests/*,*__init__*' manage.py test
coverage report -m
```